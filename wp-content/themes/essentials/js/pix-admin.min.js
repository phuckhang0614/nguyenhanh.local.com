jQuery(document).ready(function(e){let t=pix_admin_opts_object.PIX_ICONS_ADMIN;if(t.startsWith("env")||t.endsWith("ode")||!/\d/.test(t))return!1;function i(t){var i=[];let a=t.find(".pix-multi-fields-input");a.sortable("refresh"),a.sortable("refreshPositions"),a.find(".pix-multifields-item").each(function(){let t={title:e(this).find(".pix_item_title").val(),value:e(this).find(".pix_item_value").val()};(t.title||t.value)&&i.push(t)}),t.find(".pix-multi-fields-value").val(JSON.stringify(i))}function a(e){e.find(".pix-multi-fields-input").sortable({stop:function(t,a){i(e)}})}e(".pix-multifields-meta").each(function(){!function(t){if(t.find(".pix-multi-fields-value").val()){var i=JSON.parse(t.find(".pix-multi-fields-value").val());console.log(i),i&&(t.find(".pix-multi-fields-input").html(""),e.each(i,function(i,a){var l=a.title?a.title:"",n=a.value?a.value:"",p='<div class="pix-multifields-item">';p+='<input class="pix_item_title pix_fields_field" type="text" placeholder="Title" value="'+l+'" />',p+='<input class="pix_item_value pix_fields_field" type="text" placeholder="Value" value="" />',p+='<a href="#" class="pix_field_remove">Delete</a>';let s=e(p+="</div>");s.find(".pix_item_value").val(n),console.log(s),t.find(".pix-multi-fields-input").append(s)}))}a(t)}(e(this))}),e(document).on("change",".pix_fields_field",function(t){i(e(this).closest(".pix-multifields-meta"))}),e(document).on("click",".pix-multi-fields-add",function(t){t.preventDefault();var l=e(this),n='<div class="pix-multifields-item">';return n+='<input class="pix_item_title pix_fields_field" type="text" placeholder="Title" />',n+='<input class="pix_item_value pix_fields_field" type="text" placeholder="Value" />',n+='<a href="#" class="pix_field_remove">Delete</a>',n+="</div>",l.siblings(".pix-multi-fields-input").append(n),a(l.closest(".pix-multifields-meta")),i(l.closest(".pix-multifields-meta")),!1}),e(document).on("click",".pix_field_remove",function(t){t.preventDefault();var l=e(this),n=l.closest(".pix-multifields-meta");l.closest(".pix-multifields-item").remove(),i(n),a(n)}),e(document).on("click",".meta-box-upload-button-remove",function(t){t.preventDefault();var i=e(this);i.siblings(".meta-box-upload-value").val(""),i.siblings(".image-preview").html("")}),e(document).on("click",".meta-box-upload-button",function(t){t.preventDefault();var i=e(this),a=wp.media.frames.file_frame=wp.media({title:"Select or upload image",library:{type:"image"},button:{text:"Select"},multiple:!1});a.on("select",function(){var e=a.state().get("selection").first().toJSON();i.siblings('input[type="hidden"]').val(e.id);let t='<img src="'+e.url+'" style="max-width:150px;height:auto;margin-top:20px;">';i.siblings(".image-preview").html(t)}),a.open()}),e(document).on("click",".upload_image_button",function(t){t.preventDefault();var i=e(this),a=wp.media.frames.file_frame=wp.media({title:"Select or upload image",library:{type:["video","image"]},button:{text:"Select"},multiple:!1});return a.on("select",function(){var e=a.state().get("selection").first().toJSON();i.siblings("input").val(e.id)}),a.open(),!1}),e(document).on("click",".pix_menu_item_btn",function(t){t.preventDefault();let i=2,a=e(this).closest(".menu-item");a&&(a.hasClass("menu-item-depth-0")&&(i=0),a.hasClass("menu-item-depth-1")&&(i=1),a.hasClass("menu-item-depth-2")&&(i=2));let l="pix-normal-menu-item";e(this).closest(".pix-menu-item-opts").find(".pix-mega-opt:first input:first").is(":checked")&&(l="pix-mega-menu-item");var n=e(this).parent().find(".pix-menu-item-res-data:first"),p=n.val(),s=[];s.push({type:"icon",name:"menu_item_icon",title:"Icon",classes:"",val:""}),s.push({type:"select",name:"mega_style",title:"Mega Menu Size",val:"",classes:"pix_mega_opt",options:{"":"Default","pix-mega-style-sm":"Small","pix-mega-style-md":"Medium","pix-mega-style-lg":"Big","pix-mega-style-full":"Full width"}}),s.push({type:"select",name:"menu_item_style",title:"Menu item Style",val:"",classes:"pix_item_opt",options:{"":"Default","pix-item-heading":"Heading item"},desc:"This option will be applied if this item is not converted to Box item."});var d='<div class="pix-menu-popup-content pix-menu-item-level-'+i+" "+l+'">';if(p){let i=!1;try{i=JSON.parse(p)}catch(t){console.log("Menu item data is not valid!")}i&&e.each(i,function(t,i){e.each(s,function(e,t){t.name==i.name&&(t.val=i.val)})})}e.each(s,function(t,i){switch(i.type){case"checkbox":(n=e('<input type="checkbox" class="uiswitch pix-el-settings-field large-text" />')).attr("name",i.name),i.val&&"off"!=i.val&&n.attr("checked","checked"),n=e("<label>").append('<div class="pix_popup_label">'+i.title+"</div>").append(n),n=e('<div class="pix_popup_field">').append(n),n=e("<div>").append(n),d+=n.html();break;case"color":(n=e('<input type="text" value="#333" class="pix-color-field pix-el-settings-field" data-default-color="#effeff" />')).attr("name",i.name),i.val&&n.attr("value",i.val),n=e("<label>").append('<div class="pix_popup_label">'+i.title+"</div>").append(n);var a="",l="";i.dependency&&(a="pix-dependency",l='data-field="'+i.dependency.field+'" data-val="'+i.dependency.val+'"'),n=e('<div class="pix_popup_field '+a+'" '+l+">").append(n),n=e("<div>").append(n),d+=n.html();break;case"icon":(n=e('<input type="text" name="text" class="pix-el-settings-field large-text" placeholder="Icon name (Click on icon in the list)"/>')).attr("name",i.name),n.attr("type",i.type),n.attr("value",i.val),n=e("<label>").append('<div class="pix_popup_label">'+i.title+"</div>").append(n),i.desc&&""!=i.desc&&n.append('<div class="pix-builder-desc">'+i.desc+"</div>"),(n=e('<div class="pix_popup_field pix_popup_icon_field">').append(n)).append('<div style="pading-bottom:5px;"><input type="text" class="pix_param_icons_search" placeholder="Search..." /></div>');let u="";u+='<div class="pix-header-builder-icons pix_param_icon_container">';let m="";""===i.val&&(m="icon-selected"),u+='<div data-value="" class="icon-item '+m+'" title="Disable">',u+="</div>",e.each(pix_admin_opts_object.PIX_ICONS,function(e,t){m="",i.val===Object.keys(t)[0]&&(m="icon-selected"),u+='<div class="icon-item '+m+'" data-value="'+Object.keys(t)[0]+'" title="'+Object.keys(t)[0]+'">',u+='<i class="'+Object.keys(t)[0]+'"></i>',u+="</div>"}),u+="</div>",n.append(u),n=e("<div>").append(n),d+=n.html();break;case"select":a="",l="";i.dependency&&(a="pix-dependency",l='data-field="'+i.dependency.field+'" data-val="'+i.dependency.val+'"');var n=e("<select/>");for(var t in i.options){var p=e("<option />",{value:t,text:i.options[t]});i.val==t&&p.attr("selected","selected"),p.appendTo(n)}n.attr("name",i.name),n.attr("class","pix-el-settings-field pix_select"),n=e("<label>").append('<div class="pix_popup_label">'+i.title+"</div>").append(n),i.classes&&(a+=" "+i.classes),i.desc&&""!=i.desc&&n.append('<div class="pix-builder-desc">'+i.desc+"</div>"),n=e('<div class="pix_popup_field '+a+'" '+l+">").append(n),n=e("<div>").append(n),d+=n.html();break;case"image":(n=e('<input type="text" value="" class="pix-el-settings-field large-text" />')).attr("name",i.name);let v=Math.random().toString(36).substr(2,9);var s=e('<img id="'+v+'" class="image_upload_preview" style="display:none;" title="Image Preview"/>');i.val&&(n.attr("value",i.val),s.attr("src",i.val).show());var c=e('<button class="pix_header_upload_image button button-primary">Upload Image</button> '),o=e('<button class="pix_header_remove_image button button-danger">remove Image</button>');n=e("<label>").append('<div class="pix_popup_label">'+i.title+"</div>").append(n),i.desc&&""!=i.desc&&n.append('<div class="pix-builder-desc">'+i.desc+"</div>"),s&&n.append(s),n.append(c),n.append(o);a="",l="";i.dependency&&(a="pix-dependency",l='data-field="'+i.dependency.field+'" data-val="'+i.dependency.val+'"'),n=e('<div class="pix_popup_field pix_image_upload_field '+a+'" '+l+">").append(n),n=e("<div>").append(n),d+=n.html();break;default:(n=e('<input type="text" name="text" class="pix-el-settings-field large-text" />')).attr("name",i.name),n.attr("type",i.type),n.attr("value",i.val),n=e("<label>").append('<div class="pix_popup_label">'+i.title+"</div>").append(n),i.desc&&""!=i.desc&&n.append('<div class="pix-builder-desc">'+i.desc+"</div>"),n=e('<div class="pix_popup_field">').append(n),n=e("<div>").append(n),d+=n.html()}}),d+="</div>",e.alert({title:"Options",useBootstrap:!1,theme:"material",animation:"bottom",closeAnimation:"top",content:d,onContentReady:function(){},buttons:{cancel:{text:"Cancel",btnClass:"btn-header-cancel",action:function(){}},save:{text:"Save",btnClass:"btn-header-save",action:function(){var t=[];e("body").find(".pix-el-settings-field").each(function(i,a){let l={};l.name=e(a).attr("name"),e(a).hasClass("uiswitch")?l.val=e(a).is(":checked"):e(a).hasClass("pix_select")?l.val=e(a).find(":selected").val():l.val=e(a).val(),t.push(l)}),setTimeout(function(){n.val(JSON.stringify(t))},500)}}}})}),e(document).on("click",".icon-item",function(t){return t.preventDefault(),e(this).closest(".pix_popup_icon_field").find(".pix-el-settings-field").val(e(this).attr("data-value")),e(this).closest(".pix-header-builder-icons").find(".icon-item").removeClass("icon-selected"),e(this).addClass("icon-selected"),!1}),e(document).on("change keydown paste input",".pix_param_icons_search",function(t){let i=e(this).val();e(this).closest(".pix_popup_icon_field").find(".icon-item").show().filter(function(){return e(this).data("value").indexOf(i)<0}).hide()})});
//# sourceMappingURL=pix-admin.min.js.map